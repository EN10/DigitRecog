<canvas id='c' width='20' height='20' style='border:1px solid black;'></canvas>
<p id='link'>double click to generate image link</p>
<script>
var c = document.getElementById('c');
var ctx = c.getContext('2d')
var paint = false
window.onmousemove = draw
window.onmousedown = toggle
window.ondblclick = save

function toggle(){ 
if (paint)	{ paint = false;    }
else		{ paint = true;     }
}

function draw(e){
var rect =  c.getBoundingClientRect();
if (paint)  ctx.fillRect(e.x - rect.left,e.y - rect.top,1,1)
}

function save(){
var digit = new Image();
digit.src = c.toDataURL();      // draw a 4x4 boarder
c.width = 28
c.height = 28
ctx.drawImage(digit,4,4);

var q = c.toDataURL()
while (q.indexOf("+") != -1)    q = q.replace('+', '%2B');
document.getElementById("link").innerHTML = '<a href='
+ 'https://mnist-en10.c9users.io/?q=' + q
+ '>click to send image</a>'
}
</script>